<ion-header>
  <ion-toolbar color="primary">
    <ion-searchbar [(ngModel)]="autocomplete.input" (ionInput)="UpdateSearchResults()" placeholder="Search for a place"  (ionClear)="ClearAutocomplete()"></ion-searchbar>
  </ion-toolbar>
  <ion-list [hidden]="autocompleteItems.length == 0">
    <ion-item *ngFor="let item of autocompleteItems" tappable (click)="SelectSearchResult(item)">
      {{ item.description }}
    </ion-item>
  </ion-list>
  <!-- <ion-row>    
    <ion-col size="6">
      <ion-text>Google & Ionic Map</ion-text>
    </ion-col>
    <ion-col  size="6">
      <ion-button (click)="loadMap()" shape="round" fill="outline">
        <ion-icon slot="start" name="locate"></ion-icon>
          Where I Am
        </ion-button>
    </ion-col>
  </ion-row>   -->
</ion-header>
<ion-content> 
  <!-- <div class="map-wrapper" >       -->
    <!-- <div id="map_center">
      <ion-icon name="pin" size="large" color="danger"></ion-icon>      
    </div> -->
    <div #map id="map"  style="height: 60%;"></div>
  <!-- </div> -->
  <div *ngIf="user">
    <!-- <ion-list >
      <ion-item *ngFor="let waypoint of waypointArray" tappable >
        {{ waypoint.location }}
      </ion-item>
    </ion-list> -->
    
    <ion-list>
      <ion-item-sliding *ngFor="let waypoint of waypointArray" >
        <ion-item>
          <ion-label text-wrap>
            {{ waypoint.location }}
          </ion-label>
        </ion-item>

        <ion-item-options side="start">
          <ion-item-option color="danger" (click)="deleteWaypoint(waypoint)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>    
    <ion-buttons>
      <ion-button *ngIf="!loading" expand="block" (click)="calculateAndDisplayRoute()">
        <ion-icon name="hand" slot="start"></ion-icon>
        Submit
      </ion-button>
      <ion-button expand="block" (click)="ClearAutocomplete()">
        <ion-icon name="hand" slot="start"></ion-icon>
        Delete
      </ion-button>

      <ion-button expand="block" (click)="startTracking()" *ngIf="!isTracking">
        <ion-icon name="locate" slot="start"></ion-icon>
        Start Tracking
      </ion-button>

      <ion-button expand="block" (click)="stopTracking()" *ngIf="isTracking">
        <ion-icon name="hand" slot="start"></ion-icon>
        Stop Tracking
      </ion-button>
      
    </ion-buttons>
    <ion-item>
      <ion-label>User ID: {{ user.uid }}</ion-label>
    </ion-item>
    <ion-list>
      <ion-item-sliding *ngFor="let pos of locations | async">
        <ion-item>
          <ion-label text-wrap>
            Lat: {{ pos.lat }} Lng: {{ pos.lng }}
            <p>{{ pos.timestamp | date:'short' }}</p>
          </ion-label>
        </ion-item>

        <ion-item-options side="start">
          <ion-item-option color="danger" (click)="deleteLocation(pos)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>   
  
</div>
</ion-content>