<ion-header>
  <ion-toolbar color="primary">
    <ion-searchbar [(ngModel)]="autocomplete.input" (ionInput)="UpdateSearchResults()" placeholder="Search for a place"></ion-searchbar>
  </ion-toolbar>
  <ion-list [hidden]="autocompleteItems.length == 0">
    <ion-item *ngFor="let item of autocompleteItems" tappable (click)="SelectSearchResult(item);ClearAutocomplete()">
      {{ item.description }}
    </ion-item>
  </ion-list>

</ion-header>
<ion-content> 
 
    <div #map id="map"  style="height: 60%;" ></div>
 
  <div>
  
    
        
    <ion-buttons>
      

      <ion-button expand="block" (click)="addAdditionalWaypoints()"*ngIf="!isTracking"> <!--Hier noch launchnavigator-->
        <ion-icon name="hand" slot="start"></ion-icon>
        Neu Berechnen
      </ion-button>
      
      <ion-button expand="block" (click)="startTracking()"*ngIf="!isTracking"> <!--Hier noch launchnavigator-->
        <ion-icon name="hand" slot="start"></ion-icon>
        Fahrt Beginnen
      </ion-button>

      <ion-button expand="block" (click)="fahrtBeendet()" *ngIf="isTracking"> <!--hier noch stoptracking-->
        <ion-icon name="hand" slot="start"></ion-icon>
        Fahrt Beendet
      </ion-button>

      <!-- <ion-button expand="block" (click)="startTracking()" *ngIf="!isTracking">
        <ion-icon name="locate" slot="start"></ion-icon>
        Start Tracking
      </ion-button> -->
      <ion-button expand="block" (click)="abbruch()">
        <ion-icon name="hand" slot="start"></ion-icon>
        Abbruch
      </ion-button>

      
      
    </ion-buttons>
    <ion-list>
      <ion-label *ngIf="additionalWaypoints.length">Zus√§tzliche Wegpunkte zur Neuberechnung</ion-label>
      
      <ion-item-sliding *ngFor="let waypoint of additionalWaypoints">
        <ion-item>
          <ion-label text-wrap>
            {{ waypoint.location }} 
            <ion-icon class="ion-float-right" name="chatbox-ellipses-outline" (click)="addComment(waypoint)" color="danger"></ion-icon>
          </ion-label>
        </ion-item>

        <ion-item-options side="start">
          <ion-item-option color="danger" (click)="clearWaypoints(waypoint)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list> 
    <!-- <ion-item>
      <ion-label>User ID: {{ user.uid }}</ion-label>
    </ion-item> -->
    <!-- <ion-list>
      <ion-item-sliding *ngFor="let pos of locations | async">
        <ion-item>
          <ion-label text-wrap>
            Lat: {{ pos.lat }} Lng: {{ pos.lng }}
            <p>{{ pos.timestamp | date:'short' }}</p>
          </ion-label>
        </ion-item>

        <ion-item-options side="start">
          <ion-item-option color="danger" (click)="deleteLocation(pos)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>    -->
    <ion-list>
      <ion-list-header>Previous Tracks</ion-list-header>
      <ion-item *ngFor="let route of previousTracks">
        {{ route.finished | date }}, {{ route.path.length }} Waypoints
        <ion-button clear item-end (click)="showHistoryRoute(route.path)">View Route</ion-button>
      </ion-item>
    </ion-list>
  
</div>
</ion-content>